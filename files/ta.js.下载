var taqHome;!function(){var e={},t=window,n=function(e,t){var n=e.match(RegExp("(^|&|\\?|#)("+t+")=([^&#]*)(&|$|#)",""));return n?n[3]:"null"}(t.location.hash.substring(1),"heatShow"),r=(window.location.href,document),o=!1,a=He(function(){var e="",t=document.getElementsByTagName("meta");try{if(t.length>0)for(var n=0;n<t.length;n++){var r=t[n],o=r.getAttribute("charset");if(o){e=o;break}var a=r.getAttribute("http-equiv");if(a&&"content-type"==a.toLowerCase()&&(o=function(){var e=r.content,t=e.split(";");if(t.length>1){var n=t[1];return n.split("=")[1]}return null}())){e=o;break}}}catch(e){Ce("fail to parse charset: "+e)}return e.toUpperCase()}()),i=(r.characterSet?r.characterSet:r.charset).toUpperCase();if(e.bc=i,t.inTRSDesignMode)Ce("The current page existence the window.inTRSDesignMode,so exit!");else{if(Ne(a)){e.mc=a;var c=/^GB/;if(!(a==i||c.test(a)&&c.test(i)))return void Ce("the meta charset(["+a+"]) is different from browser charset(document.characterSet = ["+i+"]), so exit!")}try{o=r.domain==top.document.domain}catch(e){Ce("unable check top.document.domain: "+e)}var l=o?top.document:r;e.domain=window.location.host||"",t&&t.screen&&(e.sh=t.screen.height||0,e.sw=t.screen.width||0,e.cd=t.screen.colorDepth||0);var d=r.getElementById("gscrumb");d&&(e.gc=ve(d.innerHTML));var s,u,m=!1,f=3e3,h=!1,p=!1,g=3e3,v="",y=!1,w=null,_=null,b=null,x=null;if("undefined"!=typeof _taq)for(var I in taqHome=_taq.home,_taq)switch(_taq[I][0]){case"_mpId":e.mpId=_taq[I][1];break;case"_setUID":_taq[I][1]&&""!=_taq[I][1]&&(e.uid=_taq[I][1])}else{var E=r.getElementById("_trs_ta_js");if(!E)return void Ce("not found _trs_ta_js script element, so just return!");var k=E.src.split("?")[1].split("&");for(I=0;I<k.length;I++)try{var S=k[I].split("=")[0],C=k[I].split("=")[1];if("mpid"==S)e.mpId=C;else if("waitTitle"==S)m=C;else if("waitAjaxElement"==S)""!=ve(C)?(v=C,p=!0):p=!1;else if("siteType"==S)w=C;else if("cPrefix"==S){/^(http(s)?:)?\/\//.test(_=C)||(_="//"+_)}else"srcMode"==S&&(4==C&&(C="1,2"),x=C)}catch(e){Ce("skip a param as it is not key=value format, i="+I+", myselfSrcParamArray="+k)}taqHome=_||E.src.split("/js/")[0],b=document.getElementById("_trs_ta_js").srcsup||document.getElementById("_trs_ta_js").getAttribute("srcsup")||void 0}if(t.ta_count=t.ta_count||0,"spa"==w)t.ta_count++;else{if(t["ta.js"])return;t["ta.js"]=!0}t.TA17Obj={};var T=t.TA17Obj;T.clearLoginUser=function(){Ie(N,"/",null,We(l.domain))},T.track=function(n){if(t.inTRSDesignMode)Ce("The current page existence the window.inTRSDesignMode,so TA17Obj.track ignore!");else{if(!n.eventKey&&0!==n.eventKey)return Ce("eventKey值为："+n.eventKey+"不符合命名规范!"),!1;var o,a;n.eventKey.indexOf(".")>-1&&(n.eventKey=n.eventKey.substring(n.eventKey.indexOf(".")+1)+"&t_t="+n.eventKey.split(".")[0]);var i=r.getElementById("NewsEditionName"),c=r.getElementById("NewsEditionNumber"),l=r.getElementById("NewsArticleTitle"),d=r.getElementById("NewsArticleAuthor"),s=r.getElementById("NewsArticleID"),u=r.getElementById("NewsArticleType"),m=r.getElementById("NewsPaperName"),f=r.getElementById("NewsArticleSource"),h=r.getElementById("NewsArticlePubDay"),p=r.getElementById("SelfNewsArticleID");if(n.trackInfos&&0!=n.trackInfos.length)for(var g=0;g<n.trackInfos.length;g++)a=new Image(1,1),o=taqHome+"/1.gif?mpId="+e.mpId+"&event=jsapi&t_k="+n.eventKey+"&cu="+e.cu+"&cs="+e.cs+"&pv="+e.pv+"&url="+encodeURIComponent(e.url),n.trackInfos[g].eventItem&&(o+="&t_i="+n.trackInfos[g].eventItem),n.trackInfos[g].eventItemType&&(o+="&t_it="+n.trackInfos[g].eventItemType),n.trackInfos[g].eventItemName&&(o+="&t_in="+n.trackInfos[g].eventItemName),n.trackInfos[g].commodity_num&&(o+="&t_num="+n.trackInfos[g].commodity_num),n.trackInfos[g].commodity_money&&(o+="&t_money="+n.trackInfos[g].commodity_money.toFixed(2)),n.trackInfos[g].target_page&&(o+="&e_tu="+n.trackInfos[g].target_page),n.trackInfos[g].customParam&&(o+="&e_cus="+JSON.stringify(n.trackInfos[g].customParam)),s&&(o+="&a_id="+ve(s.innerHTML)),l&&(o+="&a_nt="+we(ve(l.innerHTML))),c&&(o+="&a_en="+ve(c.innerHTML)),i&&(o+="&a_ea="+ve(i.innerHTML)),u&&(o+="&a_tp="+ve(u.innerHTML)),m&&(o+="&a_pn="+ve(m.innerHTML)),f&&(o+="&a_src="+ve(f.innerHTML)),d&&(o+="&a_ar="+ve(d.innerHTML)),h&&(o+="&a_pd="+ve(h.innerHTML)),p&&(o+="&a_sid="+ve(p.innerHTML)),a.src=o,Re(o,"track");else a=new Image(1,1),o=taqHome+"/1.gif?mpId="+e.mpId+"&event=jsapi&t_k="+n.eventKey+"&cu="+e.cu+"&cs="+e.cs+"&pv="+e.pv+"&url="+e.url,a.src=o,Re(o,"track")}},s=(new Date).getTime(),u=(new Date).getTime();var A,N="_trs_user",M=_e(N),H=3e3,L=!1;if(M)e.uid=M,Ce("get user id from cookie");else if(void 0!==window.TA17Callbacks_getAndSendLoginUser){A=(new Date).getTime();try{Ce("start to get user id"),window.TA17Callbacks_getAndSendLoginUser(function(t){if(L)return;Ce("user state returned."),L=!0,(M=String(t))&&"null"!=M&&"undefined"!=M?(xe(N,M,"/",null,We(l.domain)),e.uid=M):Ie(N,"/",null,We(l.domain))})}catch(e){Ce("no valid method for getting user was provided."),L=!0}}else Ce("no valid method for getting user was provided."),L=!0;var O,B;if(e.pv=Se(e.mpId),r.cookie.length>0&&(O=_e("_trs_ua_s_1"),B=_e("_trs_uv")),Ee(O))Ce("sessionCookie expired: "+O+", so create new: "+(O=ke(e.mpId)));if(Ee(B))Ce("UVCookie expired: "+B+", so create new: "+(B=ke(e.mpId)));var R=new Date;R.setDate(R.getDate()+730);var U=We(l.domain);be("_trs_uv",B,"/",R.toGMTString(),U),Ce("set UVCookie topLevelDomain: "+U+", _trs_uv="+B);var j=new Date;if(j.setMinutes(j.getMinutes()+30),be("_trs_ua_s_1",O,"/",j.toGMTString()),Ce("set sessionCookie: _trs_ua_s_1="+O),e.cs=O||"",e.cu=B||"","undefined"==typeof jQuery||"undefined"==typeof $?e.title=document.title||"":e.title=$(l).attr("title")||"",e.url=l.URL||"",e.refer=l.referrer||"",1==n){var D,q=document.createElement("iframe");D=document.referrer&&"function"==typeof document.referrer.indexOf&&document.referrer.indexOf("/console/heatmap")>=0?document.referrer.slice(0,document.referrer.indexOf("/console/heatmap")):taqHome;var P=document.documentElement.scrollWidth,F=document.documentElement.scrollHeight,z=0;q.src=D+"/agent.html#"+P+"*"+F,document.body.appendChild(q),q.style.display="none";var W=function(){document.documentElement.scrollHeight!=F?(z=0,P=document.documentElement.scrollWidth,F=document.documentElement.scrollHeight,q.src=D+"/agent.html?random="+Math.random()+"#"+P+"*"+F):z<=3?(z++,setTimeout(W,1e3)):z=0};$e(window,"resize",W),n=0}var X={listenMessage:function(e){$e(window,"message",e)},postMessage:function(e){try{window.parent.postMessage(e,"*")}catch(e){Ce(e.message)}}},K=!1;X.listenMessage(function(e){var t="",n="";e.data&&"taHeatShow"==e.data.type&&(K||(K=!0,$e(window,"resize",function(){document.documentElement.scrollHeight!=n&&(t=document.body.scrollWidth,n=document.documentElement.scrollHeight>document.body.scrollHeight?document.documentElement.scrollHeight:document.body.scrollHeight,X.postMessage({type:"contentSize",value:[t,n]}))})),t=document.body.scrollWidth,n=document.documentElement.scrollHeight>document.body.scrollHeight?document.documentElement.scrollHeight:document.body.scrollHeight,X.postMessage({type:"contentSize",value:[t,n]}))}),document.onreadystatechange=function(){window.postMessage&&"complete"==document.readyState&&X.postMessage({type:"contentSize",value:[document.body.scrollWidth,document.documentElement.scrollHeight]})},navigator&&(e.lang=navigator.language||navigator.browserLanguage||"",e.fl=function(){var e="Shockwave Flash",t=e+" ";if(navigator.plugins&&navigator.plugins.length>0){var n=navigator.plugins[e];if(!n)return"-1";try{if(null!=n.version)return n.version}catch(e){}var r=n.description;return-1!=r.indexOf(t)?r.substring(t.length):r}var o=function(){var e;try{return(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")).GetVariable("$version")}catch(e){}try{return e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6"),version="WIN 6,0,21,0",e.AllowScriptAccess="always",e.GetVariable("$version")}catch(e){}try{return(e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3")).GetVariable("$version")}catch(e){}try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash.3"),"WIN 3,0,18,0"}catch(e){}try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),"WIN 2,0,0,11"}catch(e){return"-1"}}().split(","),a="";t="WIN ";for(var i=0,c=o.length;i<c;i++)-1!=o[i].indexOf(t)?(a+=o[i].substring(t.length),a+="."):i==c-1?a+=o[i]:(a+=o[i],a+=".");return a}(),e.je=navigator.javaEnabled()?1:0,e.ce=navigator.cookieEnabled?1:0);var G=t.performance;G?function n(o){var a=G.timing;try{if(parseInt(a.domContentLoadedEventEnd)<=0)return void setTimeout(function(){0,n(e)},50);var i,c=G.navigation,l=(c.type,a.connectEnd,a.connectStart),d=(a.redirectEnd,a.redirectStart,a.domainLookupEnd-a.domainLookupStart),s=a.connectEnd-l,u=a.responseStart-a.requestStart,m=(a.responseEnd,a.responseStart,a.domInteractive,a.domLoading,a.loadEventStart,a.domLoading,a.domContentLoadedEventStart-a.fetchStart),f=(a.loadEventStart,a.fetchStart,a.responseEnd-a.navigationStart),h=(a.responseStart,a.requestStart,a.requestStart,a.navigationStart,t.google&&t.chrome,function(){var e=0;try{var n=r.getElementById("_trs_ta_js").src,o=t.performance.getEntriesByName(n);o.length>0&&(e=o[0].duration)}catch(e){}return e}());if(-1!==t.navigator.userAgent.indexOf("Chrome")&&(e.p_fp=-1,t.chrome&&window.PerformancePaintTiming)){var p=performance.getEntriesByType("paint")[0];i=((p.startTime+performance.timeOrigin)/1e3).toFixed(3),e.p_fp=i>=0?i:-1}-1!=navigator.appName.indexOf("Microsoft Internet Explorer")&&document.all&&(i=a.msFirstPaint-a.navigationStart,e.p_fp=i>=0?i:-1),requestType=G.navigation.type;a.loadEventEnd,a.domLoading;var g=a.loadEventEnd-a.navigationStart;if(e.p_d=d>=0?d:-1,e.p_ct=s>=0?s:-1,e.p_st=u>=0?u:-1,e.p_nt=f>=0?f:-1,e.p_tt=g>=0?g:-1,e.p_dr=m>=0?m:-1,e.p_rt=requestType,e.p_c=0,e.p_tajs=h>=0?Math.floor(h):-1,1===requestType&&(e.p_c=0),0===a.requestStart&&(e.p_c=1),a.connectStart===a.connectEnd&&(e.p_c=1),"getEntriesByType"in G&&G.getEntriesByType("resource")instanceof Array){var v=G.getEntriesByType("resource");e.p_rc=v.length}else;Ae()}catch(e){}}():Ae();var Q=0,V=e.mpId,Y=!1,J=(/msie (\d+\.\d+)/i.test(navigator.userAgent),taqHome+"/1.gif?event=click&sr="+screen.width+"*"+screen.height+"&url="+encodeURIComponent(document.URL)),Z=J,ee=0,te=0;!!document.all||document.captureEvents(Event.MOUSEMOVE),ee=document.documentElement&&document.documentElement.scrollWidth||document.body&&document.body.scrollWidth||0,te=document.documentElement&&document.documentElement.scrollHeight||document.body&&document.body.scrollHeight||0;var ne=window.devicePixelRatio||1;ne=Number(ne).toFixed(4);window.innerWidth,window.innerHeight;var re=ye(document.URL,1024);re.indexOf("#")>0&&(re=re.substring(0,re.indexOf("#")));var oe=taqHome+"/1.gif?event=mousedown&sr="+screen.width+"*"+screen.height+"&br="+ee+"*"+te+"&dpr="+ne,ae=oe+"&clicktype=1&url="+Oe(),ie=oe+"&clicktype=2",ce=oe+"&clicktype=3&url="+Oe(),le="",de="",se="";if(t.TAQueueArr){for(I=0;I<t.TAQueueArr.length;I++)T.track(t.TAQueueArr[I][0]);t.TAQueueArr=[]}var ue=function(){var e=(n={Base64:function(){_keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.encode=function(e){var t,n,r,o,a,i,c,l="",d=0;for(e=_utf8_encode(e);d<e.length;)t=e.charCodeAt(d++),n=e.charCodeAt(d++),r=e.charCodeAt(d++),o=t>>2,a=(3&t)<<4|n>>4,i=(15&n)<<2|r>>6,c=63&r,isNaN(n)?i=c=64:isNaN(r)&&(c=64),l=l+_keyStr.charAt(o)+_keyStr.charAt(a)+_keyStr.charAt(i)+_keyStr.charAt(c);return l},this.decode=function(e){var t,n,r,o,a,i,c,l="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)o=_keyStr.indexOf(e.charAt(d++)),a=_keyStr.indexOf(e.charAt(d++)),i=_keyStr.indexOf(e.charAt(d++)),c=_keyStr.indexOf(e.charAt(d++)),t=o<<2|a>>4,n=(15&a)<<4|i>>2,r=(3&i)<<6|c,l+=String.fromCharCode(t),64!=i&&(l+=String.fromCharCode(n)),64!=c&&(l+=String.fromCharCode(r));return l=_utf8_decode(l)},_utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode=function(e){for(var t="",n=0,r=c1=c2=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}},readXPath:function(e){if(""!==e.id)return"//*[@id='"+e.id+"']";for(var t=0,n=e.parentNode,r=e.parentNode.childNodes,o=0,a=r.length;o<a;o++){var i=r[o];if(i==e)return n==document.body?e.tagName.toLowerCase()+(t+1==1?"":"["+(t+1)+"]"):arguments.callee(e.parentNode)+"/"+e.tagName.toLowerCase()+(t+1==1?"":"["+(t+1)+"]");1==i.nodeType&&i.tagName==e.tagName&&t++}},indexOf:function(e,t){if(null!=Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}},n),t=["TEXTAREA","HTML","BODY"];var n;return{tools:e,collectable:function(n){if(n==document||!n)return!1;var r=n.tagName.toUpperCase();if(e.indexOf(t,r)>-1)return!1;return!0}}}(),me=ue.tools;$e(document,"mouseup",function(e){var t=e.target||e.srcElement;document!=t&&(function(e){var t=function(e){var t=e.getAttribute("data-trs-ta-event-key");if(null==t||"undefined"==t||""==t||"null"==t){for(;(e=e.parentNode)&&1==e.nodeType;)if(null!=(t=e.getAttribute("data-trs-ta-event-key"))&&"undefined"!=t&&""!=t&&"null"!=t)return e;return null}return e}(e.target||e.srcElement);if(null!=t){var n=t.tagName.toLowerCase();if("a"==n||"input"==n||"button"==n){var r,o,a,i=ye(t.getAttribute("data-trs-ta-event-key"),255),c=ye(t.getAttribute("data-trs-ta-event-type"),255),l=ye(Me(t.getAttribute("data-trs-ta-event-itemtype")),255),d=ye(Me(t.getAttribute("data-trs-ta-event-item")),255),s=ye(Me(t.getAttribute("data-trs-ta-event-itemname")),255),u=Ue(e);r=u.x,o=u.y,a=u.z;var m=e.type;Z=Le(Z=Be(Z,t),"t_k",encodeURIComponent(i)),Z=Le(Z,"t_t",encodeURIComponent(c)),Z=Le(Z,"t_it",encodeURIComponent(l)),Z=Le(Z,"t_i",encodeURIComponent(d)),Z=Le(Z,"t_in",encodeURIComponent(s)),Z=Le(Z,"x",r),Z=Le(Z,"y",o),Z=Le(Z,"x2",a),Z=Le(Z,"e_tn",n),Z=Le(Z,"e_et",m),new Image(1,1).src=Z,Z=J}}}(e),function(e){var t=e.target||e.srcElement;if(null!=t){var n,r,o,a=ye(t.tagName.toLowerCase(),255),i=Ue(e);n=i.x,r=i.y,o=i.z;var c=ue.collectable(t),l=je(t),d="a"==a||"input"==a||"button"==a;if("a"!=a&&"input"!=a&&"button"!=a&&(1,""==le?le="{"+n+","+r+","+o+"}":le+=";{"+n+","+r+","+o+"}",Fe()),d||c){if(l.flag){ie=Be(ie,l.anchorEle,{elemText:l.anchorText});var s=ye(l.anchorEle.tagName.toLowerCase(),255);ie=Le(ie,"e_tn",s),ie=Le(ie,"e_iac","1")}else ie=Le(ie=Be(ie,t),"e_tn",a),ie=Le(ie,"e_iac","0");var u=ye(e.type,255),m="",f=0;try{var h=me.readXPath(t),p=new me.Base64;m=encodeURIComponent(p.encode(h)),0!=Q&&(f=Math.floor(((new Date).getTime()-Q)/1e3))}catch(e){Ce("someting wrong for getting element xPath"),Ce(e)}if(ie=Le(ie,"e_et",u),ie=Le(ie,"e_nd",m),ie=Le(ie,"e_etd",f),ie=Le(ie,"x",n),ie=Le(ie,"y",r),ie=Le(ie,"x2",o),isNaN(n))try{var g={isPage:e.pageX,isClient:e.clientX,isScroll:document.documentElement.scrollTop,isBodyScroll:document.body.scrollTop};ie=Le(ie,"p_err",JSON.stringify(g))}catch(e){}var v=new Image(1,1);v.src=ie,Re(v.src,"click"),ie=oe+"&clicktype=2"}}}(e),function(e){var t,n,r,o=Ue(e);t=o.x,n=o.y,r=o.z,1,""==de?(de="{x:"+t+",y:"+n+"}",se="{z:"+r+",y:"+n+"}"):(de+=",{x:"+t+",y:"+n+"}",se+=",{z:"+r+",y:"+n+"}"),ze()}(e))}),$e(window,"unload",function(){!function(){fe||Xe();var t=fe<1?fe:1,n=new Image(1,1),r=taqHome+"/1.gif?mpId="+e.mpId+"&event=viewInfo&cu="+e.cu+"&cs="+e.cs+"&pv="+e.pv+"&vp="+t+"&url="+encodeURIComponent(e.url);n.src=r,Re(r,"leave")}(),Pe()}),$e(window,"scroll",Xe);var fe,he=0;T.urlChanged=function(){Y&&(Pe(),e.pv=Se(e.mpId),"undefined"==typeof jQuery?e.title=document.title||"":e.title=$(document).attr("title")||"",e.url=document.URL||"",e.refer=document.referrer||"",h=!1,Ae())},Ke.prototype={init:function(e,t,n,r,o,a,i){this.x=e,this.y=t,this.value=n,this.w=r,this.h=o,this.scale=a,this.ele=i},draw:function(e){e.beginPath(),e.ellipse(this.x,this.y,this.w,this.h,0,0,2*Math.PI),e.closePath();var t=this.w>this.h?this.w:this.h;0==t&&(t=1),e.save(),e.scale(this.w/t,this.h/t);var n=this.w/t==0?1:this.w/t,r=this.h/t==0?1:this.h/t,o=(this.x/n).toFixed(2),a=(this.y/r).toFixed(2),i=e.createRadialGradient(o,a,0,o,a,t);this.scale<.001?(i.addColorStop(0,"rgba(0,255,0,0.5)"),i.addColorStop(.5,"rgba(0,0,255,0.3)"),i.addColorStop(1,"rgba(148,0,211,0)")):this.scale<.008?(i.addColorStop(0,"rgba(0,255,255,0.5)"),i.addColorStop(.5,"rgba(0,255,0,0.3)"),i.addColorStop(1,"rgba(0,0,255,0)")):(i.addColorStop(0,"rgba(255,0,0,0.5)"),i.addColorStop(.5,"rgba(255,255,0,0.3)"),i.addColorStop(1,"rgba(0,255,0,0)")),e.fillStyle=i;var c=2e3*this.scale;e.globalAlpha=Math.max(Math.min(c,1),0),e.fill(),e.restore()}},$e(window,"message",function(e){if(e.data&&"dealXpath"==e.data.type){var t=document.createElement("canvas");t.setAttribute("id","heatmap"),t.style.position="fixed",t.style.zIndex=999,t.style.display="block",t.style.top=0,t.style.left=0,document.body.appendChild(t);var n=document.createElement("div");n.setAttribute("id","tooltip"),n.style.backgroundColor="black",n.style.width="150px",n.style.height="40px",n.style.padding="10px",n.style.position="fixed",n.style.display="none",n.style.top=0,n.style.left=0,n.style.zIndex=1e3,document.body.appendChild(n),function(e){var t=[],n=document.getElementById("heatmap");if(n.getContext){var r=n.getContext("2d");n.width=document.body.scrollWidth,n.height=document.body.scrollHeight}else alert("浏览器不支持canvas!");for(var o in e){var a=e[o].x,i=e[o].y,c=e[o].value,l=e[o].w,d=e[o].h,s=e[o].scale,u=e[o].ele;if(void 0!==u){var m=new Ke;m.init(a,i,c,l,d,s,u),m.draw(r),t.push(m)}}document.getElementById("heatmap").getContext("2d");var f=document.getElementById("tooltip"),h=[];document.getElementById("heatmap").onmousemove=function(e){var n=e.clientX,r=e.clientY;for(var o in 0==h.length&&(f.style.display="none"),t)if(n-(t[o].x-t[o].w)>0&&n-(t[o].x-t[o].w)<2*t[o].w&&r-(t[o].y-t[o].h)>0&&r-(t[o].y-t[o].h)<2*t[o].h){if(h.length>0){if(t[o].w>h[0].w||t[o].h>h[0].h)continue;h.pop().ele.style.border=""}h.push(t[o]),h[0].ele.style.border="1px solid red",h[0].ele.style.width=2*t[o].w-2+"px",h[0].ele.style.height=2*t[o].h-2+"px",h[0].ele.style.boxSizing="border-box",f.style.display="block",n>document.body.clientWidth-200?(f.style.left=n-200+"px",f.style.top=r-10+"px"):(f.style.left=n+10+"px",f.style.top=r+10+"px"),f.style.color="white",f.innerHTML="点击量："+h[0].value+"<br />点击率："+Ve(h[0].scale)}else void 0!==t[o].ele&&(t[o].ele.style.border="",t[o]==h[0]&&(h[0].ele.style.width=2*t[o].w+"px",h[0].ele.style.height=2*t[o].h+"px",h.pop()))}}(function(e){for(var t=[],n=0;n<e.length;n++){""==e[n].xpath?e[n].xpath="html/body":"0"==e[n].xpath.substr(e[n].xpath.length-1,1)?e[n].xpath="/html/body/"+e[n].xpath.substring(0,e[n].xpath.length-2):0!=e[n].xpath.indexOf("/")&&(e[n].xpath="/html/body/"+e[n].xpath);try{var r=document.evaluate(e[n].xpath,document).iterateNext();if(r&&(0==r.childNodes.length||0!=r.childNodes.length&&0==r.childNodes[0].childNodes.length)){var o=r.offsetWidth/2+Qe(r),a=r.offsetHeight/2+Ge(r);t.push({x:o,y:a,value:e[n].click,w:r.clientWidth/2,h:r.clientHeight/2,scale:e[n].click/e[n].sumClick,ele:r})}}catch(e){console.log(e)}}return t}(e.data.data))}})}function pe(){var t=r.getElementById("NewsEditionName"),n=r.getElementById("NewsEditionNumber"),o=r.getElementById("NewsArticleTitle"),a=r.getElementById("NewsArticleAuthor"),i=r.getElementById("NewsArticleID"),c=r.getElementById("NewsArticleType"),d=r.getElementById("NewsPaperName"),s=r.getElementById("NewsArticleSource"),u=r.getElementById("NewsArticlePubDay"),m=r.getElementById("SelfNewsArticleID"),f=r.getElementById("gscrumb"),h=r.getElementById("NewsArticleDepartmentOfAuthor"),p=r.getElementById("ReserveCustomField");f&&(e.gc=ve(f.innerHTML)),(n||i)&&(i&&(e.a_id=ve(i.innerHTML)),o&&(e.a_nt=we(ve(o.innerHTML))),n&&(e.a_en=ve(n.innerHTML)),t&&(e.a_ea=ve(t.innerHTML)),c&&(e.a_tp=ve(c.innerHTML)),d&&(e.a_pn=ve(d.innerHTML)),s&&(e.a_src=ve(s.innerHTML)),a&&(e.a_ar=ve(a.innerHTML)),u&&(e.a_pd=ve(u.innerHTML)),m&&(e.a_sid=ve(m.innerHTML)),h&&(e.a_doa=ve(h.innerHTML)),p&&(e.a_rcf=ve(p.innerHTML))),"undefined"==typeof jQuery||"undefined"==typeof $?e.title=document.title||"":e.title=$(l).attr("title")||""}function ge(e){return null==e||null==e||"string"==typeof e&&0==ve(e).length}function ve(e){return e.replace(/^\s+|\s+$/gm,"")}function ye(e,t){return null==e||null==e?e:ve(e).length>t?e.substring(0,t-3)+"...":e}function we(e){return e.replace(/<br.*?>/g," ")}function _e(e){var t=r.cookie.indexOf(e+"=");if(-1==t)return null;t=t+e.length+1;var n=r.cookie.indexOf(";",t);return-1==n&&(n=r.cookie.length),decodeURIComponent(r.cookie.substring(t,n))}function be(e,t,n,o,a){null==a||null==a||0==Ne(a)?"http:"==document.location.protocol?r.cookie=e+"="+encodeURIComponent(t)+"; path="+n+"; expires="+o:"https:"==document.location.protocol&&(r.cookie=e+"="+encodeURIComponent(t)+"; path="+n+"; expires="+o+"; secure"):"http:"==document.location.protocol?r.cookie=e+"="+encodeURIComponent(t)+"; path="+n+"; domain="+a+"; expires="+o:"https:"==document.location.protocol&&(r.cookie=e+"="+encodeURIComponent(t)+"; path="+n+"; domain="+a+"; expires="+o+"; secure")}function xe(e,t,n,o,a){var i=encodeURIComponent(e)+"="+encodeURIComponent(t);n&&(i+="; path="+n),o instanceof Date&&(i+="; expires="+o.toGMTString()),a&&(i+="; domain="+a),r.cookie=i}function Ie(e,t,n,r){xe(e,"",t,new Date(0),r)}function Ee(e){if(ge(e))return!0;if("undefined"==e)return!0;if("string"!=typeof e)return!0;if(e.length>24)return Ce("length="+e.length+": "+e),!0;return!/^[^_=]{8,9}_\d+_[^_=]{1,5}$/.test(e)&&!/^[^_=]{1,5}_\d+_[^_=]{8,9}$/.test(e)&&(Ce(e+" not valid"),!0)}function ke(e){var t=parseInt(Math.floor(1e3*Math.random()+1)+""+Math.floor(1e3*Math.random()+1));return String((new Date).valueOf().toString(36).concat("_").concat(e).concat("_").concat(t.toString(36)))}function Se(e){var t=parseInt(Math.floor(1e3*Math.random()+1)+""+Math.floor(1e3*Math.random()+1));return String((e+"").concat("_").concat((new Date).valueOf().toString(36)).concat("_").concat(t.toString(36)))}function Ce(e){if(window.console&&console.log)try{console.log(e)}catch(e){}}function Te(){var t=!e.uid&&!L&&(new Date).getTime()-A<H;!function(){if(!h)if("true"!=m)pe(),h=!0;else{if("undefined"==typeof jQuery||"undefined"==typeof $)var e=document.title;else e=$(l).attr("title");Ne(e)?(pe(),h=!0):h=!1}}();var n=!h&&(new Date).getTime()-s<f;!function(){if(!y)if(1!=p)y=!0;else{var t=r.getElementById(v);null!=t&&""!=ve(t.innerHTML)?(e.gc=ve(t.innerHTML),y=!0):y=!1}}();var o=!y&&(new Date).getTime()-u<g;return t||n||o}function Ae(){if(Te())setTimeout(Ae,500);else{var t="";for(var n in e)ge(e[n])||(""!=t&&(t+="&"),t+=n+"="+encodeURIComponent(e[n]));if(taqHome){Y=!0;try{Q=(new Date).getTime(),V=e.mpId}catch(e){Ce(e)}var r=new Image(1,1);r.src=taqHome+"/1.gif?"+t,Re(r.src,"pv")}else Ce("no _taq.home!")}}function Ne(e){return"string"==typeof e&&e.length>0}function Me(e){return null==e||"undefined"==e||""==e||"null"==e?e:e.replace(/\t/g," ").replace(/(^\s*)|(\s*$)/g,"").replace(/[\r\n]/g," ")}function He(e){return null==e||"undefined"==e||""==e||"null"==e?e:e.replace(/(^\s*)|(\s*$)/g,"")}function Le(e,t,n){return null==n||"undefined"==n||""==n||"null"==n?e:e+="&"+t+"="+n}function Oe(){if("spa"==w){var e=ye(document.URL,1024);return ye(encodeURIComponent(e),1024)}return ye(encodeURIComponent(re),1024)}function Be(t,n,r){var o=n.getAttribute("href"),a=!!o&&o.match(/^#/),i=a?o:n.href;i&&(i=ye(He(i),255));var c=ye(n.id,255),l=ye(Me(n.innerText),255);r&&r.elemText&&(l=ye(Me(r.elemText),255)),l||(l=De(n));var d,s,u,m=ye(n.type,255),f=ye(n.name,255),h=ye(n.target,255);if(t=Le(t,"mpId",V),t=Le(t,"cs",e.cs),t=Le(t,"cu",e.cu),t=Le(t,"pv",e.pv),t=Le(t,"e_id",c),t=Le(t,"url",Oe()),Ne(i)&&(t=Le(t,"e_tu",encodeURIComponent(i)),!a)){var p=(u={},0==(d=He(d=i)).indexOf("http")||0==d.indexOf("https")?(u.protocol=d.substring(0,d.indexOf("://")),(s=d.substring(d.indexOf("://")+3)).indexOf("/")>-1?(u.domain=s.substring(0,s.indexOf("/")),u):(u.domain=s,u)):0==d.indexOf("//")?(u.protocol=null,(s=d.substring(d.indexOf("//")+2)).indexOf("/")>-1?(u.domain=s.substring(0,s.indexOf("/")),u):(u.domain=s,u)):d.indexOf(":")>-1?(u.protocol=d.substring(0,d.indexOf(":")),u.domain=null,u):(u.protocol=null,u.domain=parseDomain2(document.URL),u));t=Le(t,"e_td",encodeURIComponent(p.domain)),t=Le(t,"e_tp",encodeURIComponent(p.protocol))}return t=Le(t,"e_tt",m),t=Le(t,"e_tx",encodeURIComponent(l)),t=Le(t,"e_en",f),t=Le(t,"e_ht",h)}function Re(e,t){if(b&&x)for(var n=x.split(","),r=!1,o=0;o<n.length;o++){switch(n[o]){case"0":r=!1;break;case"1":r="pv"==t;break;case"2":r="click"==t;break;case"3":r="track"==t;break;default:return!1}if(r){e.split("/1.gif?")[0];var a,i=e.split("/1.gif?")[1],c=b.split(","),l=/^(http(s)?:)?\/\//;for(o=0;o<c.length;o++)a=l.test(c[o])?c[o]:"//"+c[o],taqHome!=a&&(new Image(1,1).src=a+"/1.gif?"+i)}}}function Ue(e){var t,n;t=Math.floor(e.pageX),n=Math.floor(e.pageY);var r=window.innerWidth||document.documentElement.clientWidth||document.body.offsetWidth;return isNaN(t)&&(n=Math.max(document.documentElement.scrollTop,document.body.scrollTop),t=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),n=Math.floor(e.clientY+n),t=Math.floor(e.clientX+t)),{x:t,y:n,z:Math.floor(t-r/2)}}function je(e){for(var t={flag:!1},n=e;n&&1==n.nodeType;n=n.parentNode)if(n.getAttribute("href")){t.anchorEle=n,t.anchorText=function(){if("area"==n.nodeName.toLowerCase()){var e=n.parentNode,t=e.name||e.id;return De(function(){for(var e=null,n=document.getElementsByTagName("img"),r=0;r<n.length;r++)if(n[r].getAttribute("usemap")=="#"+t){e=n[r];break}return e}())}var r=ye(Me(qe(n)),19);if(r.length>0)return r;var o,a=ye(Me(n.title),19);if(a.length>0)return a;var i=function(){for(var e="",t=n.childNodes,r=0;r<t.length;r++)if(1==t[r].nodeType&&(o||(o=t[r]),"img"==t[r].nodeName.toLowerCase())){e=t[r];break}return e}();return i?De(i):o?o.nodeName.toLowerCase()+" "+ye(Me(qe(o)),19):""}(),t.flag=!0;break}return t}function De(e){if(!e)return"";var t=e.getAttribute("alt")?He(e.getAttribute("alt")):"",n=e.getAttribute("title")?He(e.getAttribute("title")):"",r=e.getAttribute("src")?e.getAttribute("src"):"";return ye(Me(t||n||r),25)}function qe(e){return e?"string"==typeof e.textContent?e.textContent:e.innerText:""}function Pe(){Fe(),ze()}function Fe(){if(""!=le){0,ae+="&pa=["+le+"]",le="";var t=new Image(1,1);t.src=ae+"&pv="+e.pv,Re(t.src,"click"),ae=oe+"&clicktype=1&url="+Oe()}}function ze(){if(""!=de){0,ce+="&br="+ee+"*"+te,ce+="&pa=["+de+"]",ce+="&pb=["+se+"]",de="",se="";var e=new Image(1,1);e.src=ce,Re(e.src,"click"),ce=oe+"&clicktype=3&url="+Oe()}}function We(e){for(var t=[".com.cn",".net.cn",".org.cn",".gov.cn",".edu.cn",".ac.cn",".mil.cn",".ah.cn",".bj.cn",".cq.cn",".fj.cn",".gd.cn",".gs.cn",".gz.cn",".gx.cn",".ha.cn",".hb.cn",".he.cn",".hi.cn",".hl.cn",".hn.cn",".jl.cn",".js.cn",".jx.cn",".ln.cn",".nm.cn",".nx.cn",".qh.cn",".sc.cn",".sd.cn",".sh.cn",".sn.cn",".sx.cn",".tj.cn",".xj.cn",".xz.cn",".yn.cn",".zj.cn",".hk.cn",".mo.cn",".tw.cn",".com",".cn",".net",".cc",".org",".tv",".edu",".mil",".info",".mobi",".biz",".pro",".travel",".museum",".int",".areo",".post",".rec"],n="",r=0;r<t.length;r++){var o=(n=t[r]).replace(".","\\."),a=new RegExp(o+"$");if(a.test(e)){e=(e=e.replace(a,"")).substring(e.lastIndexOf(".")+1,e.length),e+=n;break}}return e}function $e(e,n,r){t.ta_count>1||(e.attachEvent?e.attachEvent("on"+n,r):e.addEventListener&&e.addEventListener(n,r,!1))}function Xe(e){var t=document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement&&document.documentElement.scrollHeight||document.body&&document.body.scrollHeight||0,r=window.innerHeight||te;he=Math.max(t,he),fe=Number((he+r)/n).toFixed(4)}function Ke(){}function Ge(e){return e.offsetParent?Ge(e.offsetParent)+e.offsetTop:e.offsetTop}function Qe(e){return e.offsetParent?Qe(e.offsetParent)+e.offsetLeft:e.offsetLeft}function Ve(e){if(0==e)return 0;var t=Number(100*e).toFixed(5);return t+="%"}}();